# Architecture Overview

This document provides an overview of the architecture for the **Algorithmic Trading in Python** project. The system is designed to automate cryptocurrency trading using robust strategies, an efficient scheduler, and secure API integration.

---

## System Components

The project is divided into modular components, ensuring scalability, maintainability, and ease of testing.

### **1. `main.py`**
- **Purpose**: Acts as the entry point for the application.
- **Responsibilities**:
  - Initializes the trading API client.
  - Configures and starts the scheduler with trading strategies.
  - Provides high-level control over the trading process.
- **Key Functions**:
  - `start_scheduler()`: Schedules trading strategies to run at specified intervals.

---

### **2. Scheduler**
- **File**: `trading_scheduler.py`
- **Purpose**: Manages the periodic execution of trading strategies.
- **Responsibilities**:
  - Runs trading strategies at predefined intervals using the `schedule` library.
  - Logs execution details and errors.
  - Ensures strategies are executed asynchronously to avoid blocking other tasks.
- **Key Features**:
  - Centralized control for managing multiple strategies.
  - Real-time monitoring of account value and trading conditions.

---

### **3. Trading Strategies**
- **File**: `trading_strategy.py`
- **Purpose**: Implements various technical analysis strategies for generating buy, sell, or hold signals.
- **Responsibilities**:
  - Fetch historical data (e.g., OHLCV) using the `ccxt` library.
  - Apply indicators such as MACD, VWAP, and TEMA to identify trading opportunities.
  - Manage active trades with stop-loss and take-profit mechanisms.
- **Key Functions**:
  - `BTC_trading_strategy()`: A Bitcoin-specific strategy using multiple indicators.
  - `calculate_macd()`: Calculates MACD values for signal generation.
  - `calculate_vwap()`: Analyzes price and volume trends for signals.

---

### **4. API Client**
- **File**: `crypto_api_trading.py`
- **Purpose**: Handles all interactions with the Robinhood Crypto Trading API.
- **Responsibilities**:
  - Authenticate API requests using API key and private key.
  - Fetch account details, holdings, and market data.
  - Place, manage, and cancel orders.
- **Key Features**:
  - Encapsulates API logic to keep the main application code clean.
  - Provides error handling for API request failures.
- **Endpoints Used**:
  - `/api/v1/crypto/trading/accounts/`
  - `/api/v1/crypto/trading/holdings/`
  - `/api/v1/crypto/marketdata/best_bid_ask/`
  - `/api/v1/crypto/trading/orders/`

---

### **5. Configuration Management**
- **File**: `config/api_config.py`
- **Purpose**: Centralizes sensitive configurations like API keys and logging settings.
- **Responsibilities**:
  - Securely load API credentials using environment variables or `.env` files.
  - Define logging configurations for monitoring the system.
- **Key Variables**:
  - `API_KEY`: The API key for authenticating with the Robinhood Crypto API.
  - `LOGGING_CONFIG`: Specifies log file, log level, and format.

---

### **6. Logging**
- **File**: `trading_scheduler.log` (output file)
- **Purpose**: Tracks system events, errors, and trade execution details.
- **Configuration**:
  - Log level: `INFO`
  - Log format: Timestamped messages with severity levels.

---

### **7. Testing**
- **Files**: `tests/test_trading_scheduler.py`, `tests/test_trading_strategy.py`
- **Purpose**: Ensures system reliability through unit tests.
- **Responsibilities**:
  - Validate individual functions and modules.
  - Simulate trading scenarios to test strategies.

---

### **8. Documentation**
- **Files**: `docs/strategy_docs.md`, `docs/api_docs.md`, `docs/architecture_overview.md`
- **Purpose**: Provides detailed insights into the systemâ€™s design and functionality.
- **Responsibilities**:
  - Describe trading strategies, API endpoints, and overall architecture.
  - Enable developers to understand and contribute to the project.

---

## Data Flow Diagram

### **1. Initialization**
- The application starts with `main.py`, which initializes the API client and scheduler.

### **2. Strategy Execution**
- The scheduler periodically triggers trading strategies.
- Strategies fetch market data via the API client and analyze it using technical indicators.

### **3. Trade Execution**
- Based on signals generated by strategies, trades are executed via the API client.
- Logs capture details of executed trades, errors, and account value updates.

---

## Key Design Principles

1. **Modularity**:
   - Each component has a specific role, making the system easier to extend and maintain.

2. **Scalability**:
   - The scheduler supports multiple strategies and intervals without performance degradation.

3. **Security**:
   - API keys are securely stored in environment variables or configuration files.
   - Sensitive data is not exposed in the codebase.

4. **Robust Logging**:
   - Logs provide detailed insights for debugging and monitoring.

---

## Future Enhancements

1. **Real-Time Alerts**:
   - Integrate notifications for critical events (e.g., trade executions, errors).

2. **Improved Risk Management**:
   - Add dynamic stop-loss and take-profit mechanisms based on market volatility.

3. **Machine Learning Strategies**:
   - Incorporate machine learning models for predictive analytics.

4. **Backtesting Module**:
   - Develop a module to simulate historical performance of strategies.

---

This architecture ensures a secure, scalable, and maintainable foundation for automated cryptocurrency trading.

---
